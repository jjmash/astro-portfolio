---
const articles = [
  {
    title: "India's massive failure to control pesticide overuse in cardamom and its spice trade",
    source: "Himal Southasian",
    url: "https://www.himalmag.com/politics/cardamom-india-spices-ban-pesticide-contamination-idukki-kerala-food-safety"
  },
  {
    title: "Purse-seiners, trawlers, and the epic fight over fishing in Tamil Nadu",
    source: "Himal Southasian",
    url: "https://www.himalmag.com/politics/purse-seine-tamil-nadu-trawlers-fishing-ban-protest-nagapattinam"
  },
  {
    title: "How the fight against a pipeline in Kerala travelled downstream",
    source: "Scroll.in",
    url: "https://scroll.in/article/1024070/how-the-fight-against-a-pipeline-in-kerala-travelled-downstream"
  },
  {
    title: "Tribal panchayats in protected areas being illegally converted to municipalities",
    source: "Frontline",
    url: "https://frontline.thehindu.com/the-nation/investigation-pushed-even-from-the-margins-tribal-panchayats-in-protected-areas-illegally-being-converted-to-municipalities/article65893689.ece"
  },
  {
    title: "Displaced by settlers: Tribal communities in Keralaâ€™s Attappady block are being alienated from their land",
    source: "Down To Earth",
    url: "https://www.downtoearth.org.in/governance/displaced-by-settlers-tribal-communities-in-kerala-s-attappady-block-are-being-alienated-from-their-land-88776"
  },
  {
    title: "Nepal's unescapable trap of migration, farming and climate change",
    source: "Himal Southasian",
    url: "https://www.himalmag.com/politics/nepal-himalaya-migration-rural-farming-agriculture-climate-change"
  }
];

const videos = [
  {
    title: "After the Green Age: Repowering Challenges in Tamil Nadu | The Wire",
    url: "https://www.youtube.com/watch?v=jRXy0S9UCpY&ab_channel=TheWire",
    thumbnail: "https://img.youtube.com/vi/jRXy0S9UCpY/0.jpg"
  },
  {
    title: "Tamil Nadu's Decade of Stagnation: Wind Energy Awaits Revival in this Once Pioneer State | The Wire",
    url: "https://www.youtube.com/watch?v=TwfTAW8q2Gg&ab_channel=TheWire",
    thumbnail: "https://img.youtube.com/vi/TwfTAW8q2Gg/0.jpg"
  },
  {
    title: "How Irulas Are Deprived of Land Rights in Tamil Nadu | The Quint",
    url: "https://www.youtube.com/watch?v=93kEz-Wimic&ab_channel=TheQuint",
    thumbnail: "https://img.youtube.com/vi/93kEz-Wimic/0.jpg"
  },
  {
    title: "Cardamom: Stories from Pesticide Hill | Himal Southasian",
    url: "https://www.youtube.com/watch?v=ixnzPfAuh94&ab_channel=Osupaan",
    thumbnail: "https://img.youtube.com/vi/ixnzPfAuh94/0.jpg"
  },
  {
    title: "Purse-seiners, trawlers, and the epic fight over fishing in Tamil Nadu | Himal Southasian",
    url: "https://www.youtube.com/watch?v=M3i5a5DV6lo&ab_channel=HimalSouthasian",
    thumbnail: "https://img.youtube.com/vi/M3i5a5DV6lo/0.jpg"
  },
  {
    title: "Nepal's unescapable trap of migration, farming and climate change | Himal Southasian",
    url: "https://www.youtube.com/watch?v=yyaPJrShNKY&ab_channel=HimalSouthasian",
    thumbnail: "https://img.youtube.com/vi/yyaPJrShNKY/0.jpg"
  }
];

const photos = [
  "/photos/IMD_1.jpg",
  "/photos/IMD_2.jpg",
  "/photos/IMD_3.jpg",
  "/photos/IMD_4.jpg",
  "/photos/IMD_5.jpg",
  "/photos/IMD_6.jpg"
];
---

<section id="videos">
  <h2>Videos</h2>
  <div class="videos">
    {videos.map(video => (
      <div class="video">
        <a href={video.url} target="_blank" style="text-decoration: none;">
          <img src={video.thumbnail} alt={video.title} loading="lazy" />
          <p style="text-decoration: none;">{video.title}</p>
        </a>
      </div>
    ))}
  </div>
</section>

<section id="photos">
  <h2>Photos</h2>
  <div class="photos" id="photo-gallery"></div>
</section>

<script>
  const gallery = document.getElementById('photo-gallery');
  const possiblePhotos = Array.from({length: 10}, (_, i) => `/photos/IMG_${i+1}.jpg`);

  possiblePhotos.forEach(path => {
    const img = new Image();
    img.src = path;
    img.onload = () => {
      const figure = document.createElement('figure');
      img.alt = "Portfolio Photo";
      img.loading = 'lazy';
      img.onclick = () => openModal(img.src);
      figure.appendChild(img);
      gallery.appendChild(figure);
    };
  });

  function openModal(src) {
    document.getElementById('lightbox-img').src = src;
    document.getElementById('lightbox').style.display = 'flex';
  }

  function closeModal() {
    document.getElementById('lightbox').style.display = 'none';
  }
</script>

<style>
  .photos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    padding: 1rem;
  }
  .photos img {
    width: 100%;
    height: auto;
    cursor: pointer;
    border-radius: 8px;
    object-fit: cover;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  #lightbox {
    display: none;
    position: fixed;
    z-index: 100;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.9);
    align-items: center;
    justify-content: center;
  }
  #lightbox img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 8px;
  }
</style>
